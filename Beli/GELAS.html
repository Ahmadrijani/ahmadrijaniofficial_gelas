<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1" />
<title>Gelas Mug Custom</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
  :root {
    --bg-main: #0f172a;
    --card-bg: #1e293b;
    --accent: #38bdf8;
    --text-main: #f8fafc;
    --text-muted: #94a3b8;
    --radius: 16px;
    --shoppe-accent: #ff6f00; /* warna tombol beli mengambang */
  }

  body {
    margin: 0;
    font-family: 'Segoe UI', Roboto, Helvetica, sans-serif;
    background: var(--bg-main);
    color: var(--text-main);
    padding-bottom: 120px; /* ruang untuk tombol mengambang + footer */
    -webkit-tap-highlight-color: transparent;
  }

  /* --- HEADER STICKY --- */
  .header {
    background: rgba(15, 23, 42, 0.95);
    backdrop-filter: blur(8px);
    position: sticky;
    top: 0;
    z-index: 999;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    padding: 12px 16px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.2);
  }

  .nav-top {
    display: flex;
    align-items: center;
    gap: 12px;
    max-width: 960px;
    margin: 0 auto 12px auto;
  }

  .logo-box {
    width: 42px; height: 42px;
    background: linear-gradient(135deg, #0ea5e9, #3b82f6);
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 20px; color: white;
    box-shadow: 0 0 10px rgba(59, 130, 246, 0.5);
  }

  /* --- TAB NAVIGASI --- */
  .tabs-wrapper {
    max-width: 960px;
    margin: 0 auto;
    display: flex;
    background: rgba(255,255,255,0.05);
    padding: 4px;
    border-radius: 50px;
  }

  .tab-btn {
    flex: 1;
    border: none;
    background: transparent;
    color: var(--text-muted);
    padding: 10px 0;
    font-size: 13px;
    font-weight: 600;
    border-radius: 40px;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex; align-items: center; justify-content: center; gap: 6px;
  }

  .tab-btn i { font-size: 14px; }
  
  .tab-btn.active {
    background: var(--accent);
    color: #000;
    box-shadow: 0 2px 10px rgba(56, 189, 248, 0.3);
  }

  /* --- CONTAINER & ANIMASI --- */
  .container {
    max-width: 960px;
    margin: 0 auto;
    padding: 16px;
    min-height: 80vh;
  }

  .tab-content {
    display: none;
    animation: fadeUp 0.5s ease forwards;
  }
  
  .tab-content.open { display: block; }

  @keyframes fadeUp {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* --- LOADING SPINNER --- */
  .loader-box {
    text-align: center;
    padding: 40px 0;
    color: var(--accent);
  }
  .spinner {
    font-size: 40px;
    margin-bottom: 15px;
    animation: spin 1s linear infinite;
  }
  @keyframes spin { 100% { transform: rotate(360deg); } }

  /* --- TOMBOL UMUM --- */
  .btn {
    display: inline-flex; align-items: center; justify-content: center; gap: 8px;
    width: 100%;
    padding: 14px;
    border-radius: 12px;
    font-weight: 700;
    border: none;
    cursor: pointer;
    font-size: 14px;
    text-decoration: none;
    transition: transform 0.1s;
  }
  .btn:active { transform: scale(0.97); }

  .btn-wa { background: #25D366; color: white; }
  .btn-accent { background: var(--accent); color: #09090b; }
  .btn-outline { background: transparent; border: 1px solid var(--accent); color: var(--accent); }

  /* --- TOMBOL KHUSUS --- */
  .btn-beli { padding: 18px; font-size: 16px; border-radius: 14px; }
  .btn-pilih { padding: 12px; font-size: 14px; }

  /* --- TAB 1: BELI (HERO) --- */
  .hero-card {
    background: var(--card-bg);
    border-radius: var(--radius);
    overflow: hidden;
    border: 1px solid rgba(255,255,255,0.05);
    margin-bottom: 25px;
    display: flex;
    gap: 16px;
    align-items: stretch;
  }

  /* responsive: hero layout vertical on small screens */
  .hero-media {
    flex: 1 1 320px;
    min-width: 200px;
  }
  .hero-body {
    flex: 1 1 300px;
    padding: 16px;
    display:flex;
    flex-direction:column;
    justify-content:center;
  }

  .hero-img {
    width: 100%;
    height: auto;
    max-height: 480px;
    object-fit: cover; /* jaga proporsi, bisa mengecil */
    display:block;
    background: #000;
  }

  .grid-preview {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
  }
  .card-mini {
    background: var(--card-bg);
    padding: 8px;
    border-radius: 12px;
    border: 1px solid rgba(255,255,255,0.05);
  }
  .card-mini img {
    width: 100%;
    height: auto; /* bisa mengecil */
    border-radius: 8px;
    object-fit: cover;
    margin-bottom: 8px;
    display:block;
  }

  /* small screens: single column preview */
  @media (max-width: 560px) {
    .hero-card { flex-direction: column; }
    .hero-media, .hero-body { min-width: auto; }
    .grid-preview { grid-template-columns: 1fr; }
    .tabs-wrapper { padding: 6px; }
    .nav-top { max-width: 100%; padding: 0 8px; }
    .container { padding: 12px; }
    .btn-beli { padding: 16px; font-size: 15px; }
  }

  /* larger screens: keep compact */
  @media (min-width: 961px) {
    .container { padding: 28px; }
  }

  /* --- TAB 2: DESAIN (VERTIKAL) --- */
  .design-card {
    background: var(--card-bg);
    border-radius: var(--radius);
    overflow: hidden;
    margin-bottom: 24px;
    border: 1px solid rgba(255,255,255,0.08);
    box-shadow: 0 4px 15px rgba(0,0,0,0.3);
  }
  .design-card img {
    width: 100%; height: auto; display: block;
    min-height: 200px; background: #111;
  }
  .design-info {
    padding: 15px;
    display: flex; justify-content: space-between; align-items: center;
    border-bottom: 1px solid rgba(255,255,255,0.05);
    margin-bottom: 10px;
  }

  /* --- TAB YOUTUBE --- */
  .yt-card {
    background: var(--card-bg);
    border-radius: var(--radius);
    overflow: hidden;
    margin-bottom: 20px;
    border: 1px solid rgba(255,255,255,0.05);
  }
  .yt-thumb {
    width: 100%; aspect-ratio: 16/9;
    position: relative; background: #000; cursor: pointer;
  }
  .yt-thumb img { width: 100%; height: 100%; object-fit: cover; opacity: 0.8; display:block; }
  .play-btn {
    position: absolute; top:50%; left:50%; transform:translate(-50%, -50%);
    width: 50px; height: 50px; background: rgba(255,0,0,0.9);
    border-radius: 50%; color: white;
    display: flex; align-items: center; justify-content: center;
    font-size: 20px; box-shadow: 0 0 20px rgba(255,0,0,0.4);
  }
  .yt-body { padding: 16px; }

  /* --- TAB 4: KONTAK --- */
  .contact-item {
    background: var(--card-bg);
    padding: 15px;
    border-radius: 12px;
    display: flex; align-items: center; gap: 15px;
    margin-bottom: 12px;
    cursor: pointer;
    border: 1px solid rgba(255,255,255,0.05);
    transition: background 0.2s;
  }
  .contact-item:active { background: rgba(255,255,255,0.1); }
  .icon-wrap { width: 30px; text-align: center; font-size: 24px; }

  /* --- Floating Buy Button (Shopee style) --- */
  .fab-buy {
    position: fixed;
    right: 18px;
    bottom: 20px;
    z-index: 1200;
    width: 64px;
    height: 64px;
    border-radius: 50%;
    background: var(--shoppe-accent);
    display: none; /* default hidden, shown on tab Beli */
    align-items: center;
    justify-content: center;
    color: #fff;
    box-shadow: 0 10px 30px rgba(0,0,0,0.35);
    cursor: pointer;
    border: 4px solid rgba(255,255,255,0.06);
  }
  .fab-buy .label {
    position: absolute;
    right: 76px;
    bottom: 8px;
    background: rgba(0,0,0,0.6);
    padding: 6px 10px;
    border-radius: 10px;
    font-size: 13px;
    display: none; /* appear on hover on desktop */
    white-space: nowrap;
  }
  @media (hover:hover) {
    .fab-buy:hover .label { display: block; }
  }

  /* --- SITE CREDIT --- */
  .site-credit {
    text-align: center;
    color: var(--text-muted);
    font-size: 12px;
    margin-top: 12px;
    font-weight: 700;
    letter-spacing: 0.6px;
  }

  /* page footer (persistent bottom) */
  .page-footer {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(15,23,42,0.95);
    border-top: 1px solid rgba(255,255,255,0.04);
    padding: 8px 12px;
    text-align: center;
    color: var(--text-muted);
    font-size: 12px;
    z-index: 1199;
  }

</style>
</head>
<body>

  <header class="header">
    <div class="nav-top">
      <div class="logo-box"><i class="fa-solid fa-mug-hot"></i></div>
      <div>
        <div style="font-size:11px; opacity:0.7; letter-spacing:1px;">OFFICIAL STORE</div>
        <div style="font-weight:800; font-size:18px; line-height:1;">Gelas Mug</div>
      </div>
    </div>
    
    <div class="tabs-wrapper">
      <button class="tab-btn active" onclick="switchTab('beli')">
        <i class="fa-solid fa-cart-shopping"></i> Beli
      </button>
      <button class="tab-btn" onclick="switchTab('desain')">
        <i class="fa-solid fa-images"></i> Desain
      </button>
      <button class="tab-btn" onclick="switchTab('youtube')">
        <i class="fa-brands fa-youtube"></i> YouTube
      </button>
      <button class="tab-btn" onclick="switchTab('kontak')">
        <i class="fa-solid fa-address-book"></i> Kontak
      </button>
    </div>
  </header>

  <main class="container">

    <section id="tab-beli" class="tab-content open">
      <div class="hero-card">
        <div class="hero-media">
          <img src="gambar_tes.png" id="heroImgDisplay" class="hero-img" alt="Produk Mug">
        </div>
        <div class="hero-body">
          <h2 style="margin:0 0 5px 0;">Cetak Mug Custom Satuan</h2>
          <div style="color:var(--accent); font-weight:800; font-size:26px;">Rp40.000</div>
          <p style="color:var(--text-muted); font-size:14px; margin: 10px 0 20px 0;">
            Bisa pakai foto sendiri, tulisan, atau logo. Pengerjaan cepat & garansi aman sampai tujuan.
          </p>
          <button class="btn btn-wa btn-beli" onclick="goLink(genWa(appSettings.pesanBeli))">
            <i class="fa-brands fa-whatsapp"></i> Pesan Sekarang via WA
          </button>
        </div>
      </div>

      <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:15px;">
        <h3 style="margin:0;">Preview Desain</h3>
        <span style="font-size:12px; color:var(--accent); cursor:pointer;" onclick="switchTab('desain')">Lihat Semua <i class="fa-solid fa-arrow-right"></i></span>
      </div>

      <div id="gridPreview" class="grid-preview"></div>

      <!-- credit di bawah tiap tab -->
      <div class="site-credit">WEBSITE DI BUAT OLEH AHMAD RIJANI</div>
    </section>

    <section id="tab-desain" class="tab-content">
      <div id="loadingDesain" class="loader-box">
        <div class="spinner"><i class="fa-solid fa-circle-notch"></i></div>
        <div>Memuat Katalog Desain...</div>
      </div>
      
      <div id="listDesain" style="display:none;">
        </div>
      
      <div id="footerDesain" style="text-align:center; padding:20px; color:var(--text-muted); display:none;">
        <i class="fa-solid fa-check-circle"></i> Semua desain sudah ditampilkan
      </div>

      <!-- credit di bawah tiap tab -->
      <div class="site-credit">WEBSITE DI BUAT OLEH AHMAD RIJANI</div>
    </section>

    <section id="tab-youtube" class="tab-content">
      <div id="loadingYouTube" class="loader-box">
        <div class="spinner"><i class="fa-solid fa-circle-notch"></i></div>
        <div>Mengambil Data YouTube...</div>
      </div>
      <div id="listYouTube" style="display:none;">
        </div>

      <!-- credit di bawah tiap tab -->
      <div class="site-credit">WEBSITE DI BUAT OLEH AHMAD RIJANI</div>
    </section>

    <section id="tab-kontak" class="tab-content">
      <h3 style="margin-top:0">Hubungi Kami</h3>
      <div id="listKontak"></div>

      <!-- tambahkan info pembuat juga di kontak -->
      <div style="margin-top:10px;">
        <div class="contact-item" onclick="/* no action */">
          <div class="icon-wrap"><i class="fa-solid fa-user" style="color:var(--accent)"></i></div>
          <div>
            <div style="font-weight:bold;">Ahmad Rijani</div>
            <div style="font-size:12px; color:var(--text-muted)">Dibuat oleh Ahmad Rijani</div>
          </div>
        </div>
      </div>

      <!-- credit di bawah tiap tab -->
      <div class="site-credit">WEBSITE DI BUAT OLEH AHMAD RIJANI</div>
    </section>

  </main>

  <!-- Floating buy button (Shopee-like) -->
  <div class="fab-buy" id="fabBuy" title="Beli Sekarang" onclick="goLink(genWa(appSettings.pesanBeli))">
    <div class="label">Beli Sekarang</div>
    <i class="fa-solid fa-cart-shopping" style="font-size:22px;"></i>
  </div>

  <!-- persistent page footer -->
  <div class="page-footer">WEBSITE DI BUAT OLEH AHMAD RIJANI</div>

  <script src="settings.js"></script>
  <script src="link.js"></script>

  <script>
    /* ================= 1. HELPERS & NAVIGASI ================= */

    function goLink(url) {
      window.location.href = url;
    }

    function genWa(pesan) {
      return `https://wa.me/${appSettings.nomorWA}?text=${encodeURIComponent(pesan)}`;
    }

    function getYoutubeId(url) {
      const regex = /(?:youtube\.com\/(?:[^\/]+\/.+\/|(?:v|e(?:mbed)?)\/|.*[?&]v=)|youtu\.be\/)([^"&?\/\s]{11})/;
      const match = url.match(regex);
      return match ? match[1] : null;
    }

    function absoluteUrl(path) {
      if(!path) return path;
      if(/^https?:\/\//i.test(path) || /^\/\//.test(path)) return path;
      const base = location.origin + location.pathname.substring(0, location.pathname.lastIndexOf('/')+1);
      return base + path.replace(/^\.\//,'');
    }

    // Pindah Tab + show/hide fab
    function switchTab(name) {
      document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
      const buttons = document.querySelectorAll('.tab-btn');
      const map = { 'beli':0, 'desain':1, 'youtube':2, 'kontak':3 };
      if(buttons[map[name]]) buttons[map[name]].classList.add('active');

      document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('open'));
      const target = document.getElementById('tab-' + name);
      if(target) target.classList.add('open');
      window.scrollTo({ top: 0, behavior: 'smooth' });

      if(name === 'desain') loadDesain();
      if(name === 'youtube') loadVideo();
      if(name === 'kontak') loadKontak();

      // fab behavior: tampilkan hanya saat tab 'beli'
      const fab = document.getElementById('fabBuy');
      if(fab) fab.style.display = (name === 'beli') ? 'flex' : 'none';
    }

    /* ================= 2. INITIALIZE HOME ================= */
    document.addEventListener("DOMContentLoaded", () => {
      // Hero Image: pakai gambar_tes.png jika ada, fallback ke appSettings.heroImage
      const hero = document.getElementById('heroImgDisplay');
      hero.src = 'gambar_tes.png';
      hero.onerror = () => { hero.src = appSettings.heroImage; };

      // Render Grid Preview (4 items)
      const grid = document.getElementById('gridPreview');
      grid.innerHTML = "";
      for(let i=1; i<=4; i++) {
        const imgRel = `${appSettings.folderAsset}${i}.png`;
        const absImg = absoluteUrl(imgRel);
        let waUrl = genWa(`Saya pilih desain nomor #${i} dan ini link gambar nya: ${absImg}`);
        grid.innerHTML += `
          <div class="card-mini">
            <img src="${imgRel}" onerror="this.src='gambar_tes.png'">
            <button class="btn btn-accent btn-pilih" style="font-size:12px; padding:8px;" onclick="goLink('${waUrl}')">
              <i class="fa-brands fa-whatsapp"></i> Pilih #${i}
            </button>
          </div>
        `;
      }

      // Tampilkan fab kalau tab awal 'beli' terbuka
      const fab = document.getElementById('fabBuy');
      if(fab) fab.style.display = document.getElementById('tab-beli').classList.contains('open') ? 'flex' : 'none';
    });

    /* ================= 3. LOGIKA DESAIN (LOADING + VERTIKAL) ================= */
    let isDesainLoaded = false;
    function loadDesain() {
      if(isDesainLoaded) return;

      const loader = document.getElementById('loadingDesain');
      const container = document.getElementById('listDesain');
      const footer = document.getElementById('footerDesain');

      loader.style.display = 'block';
      container.style.display = 'none';

      setTimeout(() => {
        container.innerHTML = "";

        for(let i=1; i<=appSettings.maxDesign; i++) {
          let imgUrl = `${appSettings.folderAsset}${i}.png`;
          let absImg = absoluteUrl(imgUrl);
          let waUrl = genWa(`Saya pilih desain nomor #${i} dan ini link gambar nya: ${absImg}`);

          container.innerHTML += `
            <div class="design-card">
              <div class="design-info">
                <div style="font-weight:bold; font-size:16px;">Kode Desain #${i}</div>
                <div style="font-size:12px; background:rgba(255,255,255,0.1); padding:4px 8px; border-radius:6px;">
                  <i class="fa-solid fa-tag"></i> Ready Stock
                </div>
              </div>
              <img src="${imgUrl}" loading="lazy" onerror="this.src='gambar_tes.png'">
              <div style="padding:16px;">
                <button class="btn btn-wa" onclick="goLink('${waUrl}')">
                  <i class="fa-brands fa-whatsapp"></i> Pesan Desain Ini
                </button>
              </div>
            </div>
          `;
        }

        loader.style.display = 'none';
        container.style.display = 'block';
        footer.style.display = 'block';
        isDesainLoaded = true;
      }, 800);
    }

    /* ================= 4. LOGIKA VIDEO/YOUTUBE (REAL THUMBNAIL) ================= */
    let isVideoLoaded = false;
    function loadVideo() {
      if(isVideoLoaded) return;

      const loader = document.getElementById('loadingYouTube');
      const container = document.getElementById('listYouTube');

      loader.style.display = 'block';
      container.style.display = 'none';

      setTimeout(() => {
        container.innerHTML = "";

        if(!listVideo || listVideo.length === 0) {
          container.innerHTML = "<div style='text-align:center'>Belum ada video.</div>";
        } else {
          listVideo.forEach(vid => {
            let ytid = getYoutubeId(vid.url);
            let thumb = ytid ? `https://img.youtube.com/vi/${ytid}/mqdefault.jpg` : 'https://via.placeholder.com/400x225?text=No+Thumbnail';

            container.innerHTML += `
              <div class="yt-card">
                <div class="yt-thumb" onclick="goLink('${vid.url}')">
                  <img src="${thumb}" alt="Thumbnail">
                  <div class="play-btn"><i class="fa-solid fa-play"></i></div>
                </div>
                <div class="yt-body">
                  <h4 style="margin:0 0 10px 0; line-height:1.4">${vid.judul}</h4>
                  <div style="font-size:12px; color:var(--text-muted); margin-bottom:8px;">${vid.channel ? vid.channel : ''}</div>
                  <button class="btn btn-outline" onclick="goLink('${vid.url}')">
                    <i class="fa-brands fa-youtube"></i> Tonton Video
                  </button>
                </div>
              </div>
            `;
          });
        }

        loader.style.display = 'none';
        container.style.display = 'block';
        isVideoLoaded = true;
      }, 800);
    }

    /* ================= 5. LOGIKA KONTAK ================= */
    let isKontakLoaded = false;
    function loadKontak() {
      if(isKontakLoaded) return;
      const container = document.getElementById('listKontak');
      container.innerHTML = "";

      container.innerHTML += `
        <div class="contact-item" onclick="goLink(genWa('Halo Admin, mau tanya-tanya.'))" style="border-color:#25d366; background:rgba(37,211,102,0.1);">
          <div class="icon-wrap"><i class="fa-brands fa-whatsapp" style="color:#25d366"></i></div>
          <div>
            <div style="font-weight:bold; color:#25d366">WhatsApp Admin</div>
            <div style="font-size:12px; color:var(--text-muted)">Fast Response 24 Jam</div>
          </div>
        </div>
      `;

      appSettings.sosmed.forEach(s => {
        container.innerHTML += `
          <div class="contact-item" onclick="goLink('${s.url}')">
            <div class="icon-wrap"><i class="${s.icon}" style="color:${s.color}"></i></div>
            <div>
              <div style="font-weight:bold;">${s.nama}</div>
              <div style="font-size:12px; color:var(--text-muted)">${s.user}</div>
            </div>
          </div>
        `;
      });

      isKontakLoaded = true;
    }

  </script>
</body>
</html>
