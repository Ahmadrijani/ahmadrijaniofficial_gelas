<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Gelas mug costum</title>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
<style>
  :root{
    --bg-1:#020617; --bg-2:#071232; --card:#0b1220; --accent:#0ea5ff;
    --muted:#9aa7bf; --text:#e6eef8; --radius:12px;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,Arial,sans-serif;background:linear-gradient(180deg,var(--bg-1),var(--bg-2));color:var(--text);-webkit-font-smoothing:antialiased;padding-bottom:28px}

  /* HEADER - tidak fixed */
  .header{display:flex;gap:8px;align-items:center;padding:12px;background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border-bottom:1px solid rgba(255,255,255,0.03);flex-wrap:wrap}
  .brand{display:flex;gap:10px;align-items:center;font-weight:800}
  .brand .logo{width:44px;height:44px;border-radius:10px;background:linear-gradient(135deg,#052b4a,#08325a);display:flex;align-items:center;justify-content:center;font-weight:900}
  .tabs{margin-left:16px;display:flex;gap:6px;align-items:center;flex-wrap:wrap}
  .tab-btn{padding:8px 12px;border-radius:10px;border:none;background:transparent;color:var(--muted);cursor:pointer;font-weight:700;transition:all .18s}
  .tab-btn:hover{transform:translateY(-2px)}
  .tab-btn.active{background:linear-gradient(90deg,rgba(14,165,255,0.12),rgba(14,165,255,0.06)); color:var(--text)}

  .container{max-width:1100px;margin:18px auto;padding:12px}
  .product-card{background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));border:1px solid rgba(255,255,255,0.03);padding:14px;border-radius:var(--radius);display:flex;gap:14px;align-items:center;flex-wrap:wrap;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
  .product-thumb{flex:0 0 320px;max-width:100%}
  .product-thumb img{width:100%;height:auto;max-height:56vh;object-fit:contain;border-radius:10px;display:block;border:1px solid rgba(255,255,255,0.03)}
  .product-info{flex:1;min-width:180px}
  h1.prod-title{margin:0;font-size:20px}
  .price{font-size:20px;font-weight:900;margin:8px 0;color:var(--accent)}
  .muted{color:var(--muted);font-size:13px}
  .buy-btn{background:linear-gradient(90deg,var(--accent),#0086d1);color:#00121a;padding:12px 16px;border-radius:12px;border:none;font-weight:900;cursor:pointer;font-size:16px;display:inline-flex;align-items:center;gap:10px}
  .link-like{background:transparent;border:none;color:var(--accent);font-weight:800;cursor:pointer;padding:6px 8px;border-radius:8px}

  /* PREVIEW (Buy) = grid */
  .design-section{margin-top:18px}
  .design-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(140px,1fr));gap:12px;margin-top:8px}
  .design-card{background:var(--card);padding:8px;border-radius:10px;text-align:center;border:1px solid rgba(255,255,255,0.02);display:flex;flex-direction:column}
  .thumb-wrap{width:100%;aspect-ratio:4/3;overflow:hidden;border-radius:8px}
  .design-card img{width:100%;height:100%;object-fit:cover;display:block}
  .design-no{margin-top:8px;font-weight:800;color:var(--text)}
  .design-actions{display:flex;gap:8px;margin-top:8px}
  .btn-small{padding:8px;border-radius:8px;border:none;font-weight:800;cursor:pointer}
  .btn-buy-small{background:var(--accent);color:#00121a;flex:1}

  /* LIHAT DESAIN = vertical list (satu baris per item) */
  #allDesignGrid{display:flex;flex-direction:column;gap:12px;margin-top:8px}
  .list-card{display:flex;gap:12px;align-items:center;padding:10px;border-radius:10px;background:var(--card);border:1px solid rgba(255,255,255,0.02)}
  .list-card .thumb-small{width:110px;flex:0 0 110px;aspect-ratio:4/3;overflow:hidden;border-radius:8px}
  .list-card .thumb-small img{width:100%;height:100%;object-fit:cover;display:block}
  .list-meta{flex:1;display:flex;flex-direction:column;gap:6px}
  .list-actions{display:flex;gap:8px;align-items:center}

  /* YT, kontak, footer */
  .yt-list{display:flex;flex-direction:column;gap:10px;margin-top:10px}
  .yt-item{background:var(--card);padding:10px;border-radius:10px;display:flex;gap:12px;align-items:center;border:1px solid rgba(255,255,255,0.02)}
  .yt-thumb{width:160px;flex:0 0 160px;border-radius:8px;overflow:hidden}
  .yt-thumb img{width:100%;height:auto;display:block;object-fit:cover}
  .yt-meta{flex:1;display:flex;flex-direction:column;gap:6px}
  .yt-title{font-weight:800;color:var(--text)}
  .kontak-card{background:var(--card);padding:12px;border-radius:12px;box-shadow:0 10px 30px rgba(2,6,23,0.5);margin-top:12px;border:1px solid rgba(255,255,255,0.03)}
  .kontak-row{display:flex;gap:12px;align-items:center;flex-wrap:wrap}
  .kontak-link{display:flex;gap:8px;align-items:center;color:var(--text);text-decoration:none;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.02);background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent)}
  .kontak-link i{width:28px;text-align:center;font-size:16px;color:var(--accent)}
  .kontak-handle{color:var(--text);font-weight:800}
  .footer{margin-top:20px;padding:12px;text-align:center;color:var(--muted);font-weight:700;border-top:1px solid rgba(255,255,255,0.02)}
  .manual-link{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);padding:8px;border-radius:8px;margin-top:10px;border:1px dashed rgba(255,255,255,0.03);display:none}
  .tab-content{max-height:0;opacity:0;overflow:hidden;transform:translateY(8px);transition:max-height .42s cubic-bezier(.2,.9,.2,1),opacity .28s,transform .28s}
  .tab-content.open{max-height:2000px;opacity:1;transform:none}

  @media(max-width:640px){
    .product-thumb{flex-basis:100%}
    .product-card{flex-direction:column;align-items:stretch}
    .yt-thumb{width:120px;flex-basis:120px}
  }
  @media(max-width:420px){
    #allDesignGrid .list-card{flex-direction:column;align-items:flex-start}
    #allDesignGrid .thumb-small{width:100%;aspect-ratio:16/9}
  }
</style>
</head>
<body>
  <header class="header" role="banner">
    <div class="brand">
      <div class="logo"><i class="fa-solid fa-mug-saucer" style="font-size:18px;color:var(--accent)"></i></div>
      <div><div style="font-size:14px;color:var(--muted)">Toko</div><div style="font-size:16px">Gelas mug costum</div></div>
    </div>
    <nav class="tabs" role="navigation" aria-label="tab navigasi">
      <button class="tab-btn active" data-tab="buy"><i class="fa-solid fa-cart-shopping"></i> Buy</button>
      <button class="tab-btn" data-tab="desain"><i class="fa-solid fa-images"></i> Lihat Desain</button>
      <button class="tab-btn" data-tab="youtube"><i class="fa-brands fa-youtube"></i> YouTube</button>
      <button class="tab-btn" data-tab="kontak"><i class="fa-solid fa-address-book"></i> Kontak</button>
    </nav>
  </header>

  <main class="container">
    <!-- BUY -->
    <section id="tab-buy" class="tab-content open" aria-labelledby="prod-title">
      <div class="product-card">
        <div class="product-thumb">
          <img id="heroImage" src="asset/gambar_tes.png" alt="Gelas mug costum" loading="lazy" decoding="async" sizes="(max-width:420px) 100vw, (max-width:900px) 50vw, 33vw">
        </div>
        <div class="product-info">
          <h1 id="prod-title" class="prod-title">Gelas mug costum</h1>
          <div class="price" id="priceText">Rp40.000</div>
          <p class="muted">Stok: tersedia</p>
          <div style="margin-top:12px;display:flex;gap:10px;flex-wrap:wrap;align-items:center">
            <button id="buyNow" class="buy-btn"><i class="fa-solid fa-paper-plane"></i> Beli Sekarang</button>
            <button class="link-like" id="lihatLain" title="Lihat desain lain"><i class="fa-solid fa-chevron-down"></i> Lihat desain lain</button>
          </div>
          <div id="manualArea" class="manual-link" aria-hidden="true"></div>
        </div>
      </div>

      <div class="design-section">
        <h3 style="margin:10px 0 6px">Desain (preview)</h3>
        <div id="designGrid" class="design-grid" aria-live="polite"></div>
      </div>
    </section>

    <!-- LIHAT DESAIN (VERTICAL LIST) -->
    <section id="tab-desain" class="tab-content" style="display:block">
      <h3 style="margin-top:6px">Semua Desain</h3>
      <div id="allDesignGrid" class="design-grid" aria-live="polite"></div>
    </section>

    <!-- YOUTUBE -->
    <section id="tab-youtube" class="tab-content" style="display:block">
      <h3 style="margin-top:6px">Video</h3>
      <div id="ytArea" class="yt-list"><div class="muted">Memuat daftar... kalau gagal, cek file <code>linkYT.json</code>.</div></div>
    </section>

    <!-- KONTAK -->
    <section id="tab-kontak" class="tab-content" style="display:block">
      <h3 style="margin-top:6px">Kontak Saya</h3>
      <div class="kontak-card">
        <div class="kontak-row" style="margin-bottom:8px">
          <a class="kontak-link" href="https://instagram.com/ahmadrijaniofficial" target="_blank" rel="noopener"><i class="fa-brands fa-instagram"></i><div class="kontak-handle">@ahmadrijaniofficial</div></a>
          <a class="kontak-link" href="https://www.youtube.com/@ahmadrijaniofficial" target="_blank" rel="noopener"><i class="fa-brands fa-youtube"></i><div class="kontak-handle">@ahmadrijaniofficial</div></a>
          <a class="kontak-link" href="https://www.tiktok.com/@ahmadrijaniofficial" target="_blank" rel="noopener"><i class="fa-brands fa-tiktok"></i><div class="kontak-handle">@ahmadrijaniofficial</div></a>
        </div>
        <div class="kontak-row">
          <a class="kontak-link" href="https://instagram.com/mug_costum_11_tkj2" target="_blank" rel="noopener"><i class="fa-brands fa-instagram"></i><div class="kontak-handle">@mug_costum_11_tkj2</div></a>
          <button id="waContact" class="kontak-link" style="cursor:pointer;background:linear-gradient(180deg, rgba(255,255,255,0.01), transparent);border:none"><i class="fa-brands fa-whatsapp"></i><div class="kontak-handle">WhatsApp</div></button>
        </div>
      </div>
    </section>

    <div class="footer">Web dibuat oleh Ahmad Rijani</div>
  </main>

<script>
/* KONFIGURASI */
const encodedNumber = "MDgyMzUxMzMzMDQ3"; // base64 nomor WA
const harga = 40000;
const maxDesign = 20;
const desainFolder = 'asset/foto/'; // asset/foto/1.png ... 20.png (PNG only)
const assetHero = 'asset/gambar_tes.png';

/* util */
function formatRupiah(n){ return 'Rp' + n.toString().replace(/\B(?=(\d{3})+(?!\d))/g, "."); }

/* set harga */
document.getElementById('priceText').textContent = formatRupiah(harga);

/* Tab handling */
const tabButtons = document.querySelectorAll('.tab-btn');
const tabNames = ['buy','desain','youtube','kontak'];
function showTab(name){
  tabNames.forEach(t=>{
    const el = document.getElementById('tab-'+t);
    const btn = document.querySelector('.tab-btn[data-tab="'+t+'"]');
    if(!el || !btn) return;
    if(t === name){ el.classList.add('open'); btn.classList.add('active'); el.setAttribute('aria-hidden','false'); }
    else { el.classList.remove('open'); btn.classList.remove('active'); el.setAttribute('aria-hidden','true'); }
  });
  window.scrollTo({top:0,behavior:'smooth'});
}
tabButtons.forEach(b=> b.addEventListener('click', ()=> showTab(b.dataset.tab) ));
showTab('buy');

/* lihat desain lain */
document.getElementById('lihatLain').addEventListener('click', ()=>{
  showTab('desain');
  const el = document.getElementById('allDesignGrid');
  if(el) el.scrollIntoView({behavior:'smooth',block:'center'});
});

/* Open WhatsApp (popup detect) */
function openWhatsApp(nomor, pesan){
  const url = 'https://wa.me/' + nomor + '?text=' + pesan;
  const win = window.open(url, '_blank');
  if(!win){
    const manual = document.getElementById('manualArea');
    manual.style.display = 'block';
    manual.setAttribute('aria-hidden','false');
    manual.innerHTML = '<div>Popup diblokir. Klik link manual ini: <br><a href="'+url+'" target="_blank" rel="noopener noreferrer" style="color:var(--accent)">'+url+'</a></div>';
  } else {
    const manual = document.getElementById('manualArea');
    manual.style.display = 'none';
    manual.setAttribute('aria-hidden','true');
  }
}

/* Buy actions */
document.getElementById('buyNow').addEventListener('click', ()=>{
  const nomor = atob(encodedNumber);
  const pesan = encodeURIComponent('Halo, saya mau beli gelas (harga ' + formatRupiah(harga) + ')');
  openWhatsApp(nomor, pesan);
});
document.getElementById('waContact').addEventListener('click', ()=>{
  const nomor = atob(encodedNumber);
  const pesan = encodeURIComponent('Halo, saya mau tanya tentang Gelas mug costum');
  openWhatsApp(nomor, pesan);
});

/* imageExists with timeout */
function imageExists(src, timeout=2000){
  return new Promise(resolve=>{
    const img = new Image();
    let done=false;
    img.onload = ()=>{ if(!done){ done=true; resolve(true); } };
    img.onerror = ()=>{ if(!done){ done=true; resolve(false); } };
    setTimeout(()=>{ if(!done){ done=true; resolve(false); } }, timeout);
    img.src = src;
  });
}

/* init hero */
(async function initHero(){
  const heroEl = document.getElementById('heroImage');
  const ok = await imageExists(assetHero,2000);
  if(ok) heroEl.src = assetHero;
  else heroEl.src = generatePlaceholder('No hero image (asset/gambar_tes.png)');
})();

/* placeholder */
function generatePlaceholder(text,w=800,h=600){
  const svg = '<svg xmlns="http://www.w3.org/2000/svg" width="'+w+'" height="'+h+'"><rect width="100%" height="100%" fill="#2b3745"/><text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#9aa7bf" font-size="24" font-family="Arial,Helvetica">'+text+'</text></svg>';
  return 'data:image/svg+xml;charset=utf-8,' + encodeURIComponent(svg);
}

/* create list-card for "Lihat Desain" (vertical row) */
function createListCard(index, imgPath){
  const card = document.createElement('div');
  card.className = 'list-card';

  const thumb = document.createElement('div');
  thumb.className = 'thumb-small';
  const img = document.createElement('img');
  img.src = imgPath;
  img.alt = 'Desain ' + index;
  img.loading = 'lazy';
  img.decoding = 'async';
  thumb.appendChild(img);

  const meta = document.createElement('div');
  meta.className = 'list-meta';
  const title = document.createElement('div');
  title.textContent = 'Desain #' + index;
  title.style.fontWeight = '800';
  const subtitle = document.createElement('div');
  subtitle.className = 'muted';
  subtitle.textContent = 'Harga: ' + formatRupiah(harga);

  const actions = document.createElement('div');
  actions.className = 'list-actions';
  const btnBuy = document.createElement('button');
  btnBuy.className = 'btn-small btn-buy-small';
  btnBuy.type = 'button';
  btnBuy.textContent = 'Beli yang ini';
  btnBuy.addEventListener('click', function(){
    // buat pesan dengan format contoh: "Saya pilih desain nomor 6 yang ini file:///asset/foto/6.png"
    const nomor = atob(encodedNumber);
    // pakai file:/// + path (sesuai contoh)
    let pathForMsg = imgPath;
    if(pathForMsg.charAt(0) !== '/') pathForMsg = '/' + pathForMsg;
    const fileUrl = 'file:///' + pathForMsg.replace(/^\/+/,'');
    const pesanText = 'Saya pilih desain nomor ' + index + ' yang ini ' + fileUrl;
    const pesan = encodeURIComponent(pesanText);
    openWhatsApp(nomor, pesan);
  });

  const aView = document.createElement('a');
  aView.className = 'btn-small';
  aView.href = imgPath;
  aView.target = '_blank';
  aView.rel = 'noopener';
  aView.textContent = 'Lihat';

  actions.appendChild(btnBuy);
  actions.appendChild(aView);

  meta.appendChild(title);
  meta.appendChild(subtitle);
  meta.appendChild(actions);

  card.appendChild(thumb);
  card.appendChild(meta);

  return card;
}

/* create grid-card for preview (Buy tab) */
function createGridCard(index, imgPath){
  const card = document.createElement('div');
  card.className = 'design-card';
  const inner = '<div class="thumb-wrap"><img src="'+imgPath+'" alt="Desain '+index+'" loading="lazy" decoding="async" sizes="(max-width:420px) 100vw, (max-width:900px) 50vw, 33vw"></div>' +
                '<div class="design-no">#'+index+'</div>' +
                '<div class="design-actions"><button class="btn-small btn-buy-small" type="button" data-index="'+index+'" data-path="'+imgPath+'">Beli yang ini</button>' +
                '<a class="btn-small" href="'+imgPath+'" target="_blank" rel="noopener" style="background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--text)">Lihat</a></div>';
  card.innerHTML = inner;
  // attach listener to the button (no inline)
  const btn = card.querySelector('button[data-index]');
  if(btn){
    btn.addEventListener('click', function(){
      const idx = btn.getAttribute('data-index');
      const p = btn.getAttribute('data-path');
      const nomor = atob(encodedNumber);
      let pathForMsg = p;
      if(pathForMsg.charAt(0) !== '/') pathForMsg = '/' + pathForMsg;
      const fileUrl = 'file:///' + pathForMsg.replace(/^\/+/,'');
      const pesanText = 'Saya pilih desain nomor ' + idx + ' yang ini ' + fileUrl;
      const pesan = encodeURIComponent(pesanText);
      openWhatsApp(nomor, pesan);
    });
  }
  return card;
}

/* load designs PNG only (asset/foto/1.png ... 20.png) */
async function loadDesignsPngOnly(){
  const previewContainer = document.getElementById('designGrid');
  const allContainer = document.getElementById('allDesignGrid');
  previewContainer.innerHTML = '';
  allContainer.innerHTML = '';

  const found = [];
  for(let i=1;i<=maxDesign;i++){
    const path = desainFolder + i + '.png';
    const ok = await imageExists(path, 2000);
    if(ok){
      found.push({i, path});
      // add grid preview (Buy)
      const gridCard = createGridCard(i, path);
      previewContainer.appendChild(gridCard);
      // add vertical list item (Lihat Desain)
      const listCard = createListCard(i, path);
      allContainer.appendChild(listCard);
    }
  }

  // jika tidak ada sama sekali, tampilkan placeholder demo (4 buah)
  if(found.length === 0){
    for(let j=1;j<=4;j++){
      const text = 'Contoh desain ' + j;
      const dataUrl = generatePlaceholder(text,640,480);
      const gridCard = createGridCard('C'+j, dataUrl);
      previewContainer.appendChild(gridCard);
      const listCard = createListCard('C'+j, dataUrl);
      allContainer.appendChild(listCard);
    }
  }
}

/* YouTube loader (sama seperti sebelumnya) */
async function loadYouTubeList(){
  const area = document.getElementById('ytArea');
  area.innerHTML = '<div class="muted">Memuat...</div>';
  try{
    const res = await fetch('linkYT.json', {cache:'no-store'});
    if(!res.ok) throw new Error('JSON tidak ditemukan');
    const data = await res.json();
    if(!Array.isArray(data) || data.length===0){
      area.innerHTML = '<div class="muted">Tidak ada data video di linkYT.json</div>';
      return;
    }
    area.innerHTML = '';
    data.forEach(item=>{
      const thumb = item.thumb ? item.thumb : (item.url ? 'https://img.youtube.com/vi/' + extractYouTubeID(item.url) + '/hqdefault.jpg' : '');
      const div = document.createElement('div');
      div.className = 'yt-item';
      div.innerHTML = '<div class="yt-thumb"><img src="'+thumb+'" alt="'+escapeHtml(item.title||'video')+'" loading="lazy" decoding="async" sizes="(max-width:420px) 100vw, 160px"></div>' +
                      '<div class="yt-meta"><div class="yt-title">'+escapeHtml(item.title||'Untitled')+'</div>' +
                      '<div style="color:var(--muted);font-size:13px">'+escapeHtml(item.channel||'')+'</div>' +
                      '<div class="yt-actions"><a class="buy-btn" style="background:#ff4b4b;color:#fff;text-decoration:none" href="'+item.url+'" target="_blank" rel="noopener">Tonton</a></div></div>';
      area.appendChild(div);
    });
  }catch(e){
    area.innerHTML = '<div class="muted">Gagal memuat linkYT.json â€” pastikan file tersedia. ('+e.message+')</div>';
  }
}
function extractYouTubeID(url){ try{ const u=new URL(url); if(u.hostname.includes('youtu.be')) return u.pathname.slice(1); if(u.hostname.includes('youtube.com')) return u.searchParams.get('v')||''; return ''; }catch(e){return '';} }
function escapeHtml(s){ return String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m])); }

/* init */
(async function init(){
  await loadDesignsPngOnly();
  let ytLoaded=false;
  document.querySelector('.tab-btn[data-tab="youtube"]').addEventListener('click', ()=>{ if(!ytLoaded){ loadYouTubeList(); ytLoaded=true; } });
})();
</script>
</body>
</html>
